#include<iostream>
#include<string>
#include<fstream>
#include<time.h>
#include<cstdlib>
#include "theHM.h"
#include "Functions.h"

using namespace std;

void main()
{
	theHM Hm;
	int menuChoice = 0;
	int playerChoice = 0;
	string P1guess, P2guess;
	//----------------------------Start Screen
	while (menuChoice != 1)
	{
		StartMessage();
		gotoxy(72, 19);
		cin >> menuChoice;
	}

	system("CLS"); 
	//-----------------------------Rules and # of Players Choice 
	Rules();
	playerQ();
	cin >> playerChoice;

	system("CLS");
	//------------------------------Game Screen
	// ---------------------------------------------------One Player Game Engine
	if (playerChoice == 1) 
	{
		cout << "One Player Mode" << endl;
		WordMessage();
		Hm.showGallows();
		Hm.loadWords();
		Hm.hiddenWord();
		Hm.showBank();

		//Takes in First Guess
		gotoxy(30, 22);
		cout << "First Guess: ";
		cin >> P1guess;

		// Checks First Guess against Hidden word.
		if (P1guess == Hm.HiddenWord)
		{
			system("CLS");
			WinningMessage();
			return;
		}

		else
		{
			system("CLS");
			Hm.showGallows();
			Hm.HMhead();
			Hm.showBank();

			//Takes in Second Guess.
			gotoxy(30, 22);
			cout << "Second Guess: ";
			cin >> P1guess;

			// Checks Second Guess against Hidden Word
			if (P1guess == Hm.HiddenWord)
			{
				system("CLS");
				WinningMessage();
				return;
			}

			else
			{
				system("CLS");
				Hm.showGallows();
				Hm.HMhead();
				Hm.justBody();
				Hm.showBank();

				//Takes in Third Guess.
				gotoxy(30, 22);
				cout << "Third Guess: ";
				cin >> P1guess;

				// Checks Third Guess against Hidden Word
				if (P1guess == Hm.HiddenWord)
				{
					system("CLS");
					WinningMessage();
					return;
				}
				else
				{
					system("CLS");
					Hm.showGallows();
					Hm.HMhead();
					Hm.justBody();
					Hm.lftArm();
					Hm.showBank();

					//Takes in forth Guess.
					gotoxy(30, 22);
					cout << "Forth Guess: ";
					cin >> P1guess;
					
					if (P1guess == Hm.HiddenWord)
					{
						system("CLS");
						WinningMessage();
						return;
					}
					else
					{
						system("CLS");
						Hm.showGallows();
						Hm.HMhead();
						Hm.justBody();
						Hm.lftArm();
						Hm.rghtArm();
						Hm.showBank();

						//Takes in Last Guess.
						gotoxy(30, 22);
						cout << "Forth Guess: ";
						cin >> P1guess;
						if (P1guess == Hm.HiddenWord)
						{
							system("CLS");
							WinningMessage();
							return;
						}
						else
						{
							system("CLS");
							Hm.showGallows();
							Hm.HMhead();
							Hm.justBody();
							Hm.lftArm();
							Hm.rghtArm();
							Hm.HMlegs();
						}
					}

				}
			}


		}
	}
	//-------------------------------------------- 2 Player Game Engine
	else if (playerChoice == 2)
	{
		cout << "Two Player Mode" << endl;
		WordMessage();
		Hm.showGallows();
		Hm.loadWords();
		Hm.hiddenWord();
		Hm.showBank();

		//Takes in First Guess from both players
		gotoxy(30, 22);
		cout << "Player One Guess: ";
		cin >> P1guess;
		gotoxy(30, 23);
		cout << "Player Two Guess: ";
		cin >> P2guess;

		// Checks First Guess against Hidden word.
		if (P1guess == Hm.HiddenWord)
		{
			system("CLS");
			WinningMessage();
			cout << "Player 1 is the winner" << endl;
			return;
		}
		else if (P2guess == Hm.HiddenWord)
		{
			system("CLS");
			WinningMessage();
			cout << "Player 2 is the winner" << endl;
			return;
		}

		else
		{
			system("CLS");
			Hm.showGallows();
			Hm.HMhead();
			Hm.showBank();

			//Takes in Second Guess from both players.
			gotoxy(30, 22);
			cout << " Player One Guess: ";
			cin >> P1guess;
			gotoxy(30, 23);
			cout << "Player Two Guess: ";
			cin >> P2guess;

			// Checks Second Guess against Hidden Word
			if (P1guess == Hm.HiddenWord)
			{
				system("CLS");
				WinningMessage();
				cout << "Player 1 is the winner" << endl;
				return;
			}
			else if (P2guess == Hm.HiddenWord)
			{
				system("CLS");
				WinningMessage();
				cout << "Player 2 is the winner" << endl;
				return;
			}

			else
			{
				system("CLS");
				Hm.showGallows();
				Hm.HMhead();
				Hm.HMarmsbody();
				Hm.showBank();

				//Takes in Both Players Last Guess.
				gotoxy(30, 22);
				cout << "Player One Guess: ";
				cin >> P1guess;
				gotoxy(30, 23);
				cout << "Player Two Guess: ";
				cin >> P2guess;

				// Checks Third Guess against Hidden Word
				if (P1guess == Hm.HiddenWord)
				{
					system("CLS");
					WinningMessage();
					cout << "Player 1 is the winner" << endl;
					return;
				}
				else if (P2guess == Hm.HiddenWord)
				{
					system("CLS");
					WinningMessage();
					cout << "Player 2 is the winner" << endl;
					return;
				}
				
				else
				{
					system("CLS");
					LosingMessage();
					Hm.showGallows();
					Hm.HMhead();
					Hm.HMarmsbody();
					Hm.HMlegs();

				}
			}


		}
	}
	else if (menuChoice == 2) // Option to quit the game at the start menu
	{
		cout << " You Didn't want to Lose. I Get it. Thanks For Playing." << endl;
		return;
	}

	cin.get();

}
